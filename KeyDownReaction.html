<!DOCTYPE html>
<html>
<body>
<p id="out">delay: </p>
<audio id="myAudio" src="1Hz_600s.mp3" controls>Your browser does not support the HTML5 audio tag.</audio> 
<script>
///////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                   //
//  INSTRUCTIONS:                                                                                    //
//    Press a key quickly once the screen changes to green (ms reaction time is displayed).          //
//    Changes only occur at one-second intervals, so the metronome sound can be played for help.     //
//    More measurement error occurs for busier CPUs, which will also cause text to flicker more.     //
//    Saved data is in "localStorage" (in developer window) - Delete with "localStorage.clear()".    //
//                                                                                                   //
///////////////////////////////////////////////////////////////////////////////////////////////////////
var outEle = document.getElementById("out");
var downlast = new Date().getTime();
document.onkeydown = function () {
    downlast = (new Date().getTime()) - clocklast; // downlast = (new Date().getTime()) - clocklast - 1; 1 for 1ms mainly for Windows OS to deliver event message (but could be infinite for busy CPU!)
    //if (downlast < 0) downlast += 1000;   // for getMilliseconds replacing getTime
    if (document.body.style.backgroundColor == "red"){
       outEle.innerHTML += "x"+downlast;
       localStorage.setItem("react2 "+clocklast+",x", downlast);
    }
    else {
       outEle.innerHTML += " "+downlast;
       localStorage.setItem("react2 "+clocklast+",o", downlast);
    }
};

var clocklast = new Date().getTime();
setInterval(function() {
    if (Math.random()<0.5) {document.body.style.backgroundColor = "red";}
    else                   {document.body.style.backgroundColor = "green"; clocklast = (new Date().getTime());}  // clocklast = (new Date().getTime())+7; 7 for 7ms mainly for 60Hz monitor refresh (but could be infinite for busy CPU!)
},1000);

//Chrome does not allow autoplay!
//var audEle = document.getElementById("myAudio");
//audEle.play();

</script> 
</body>
</html>